# Roadmap

## Objective

Deliver the Recipe Manager MVP described in `docs/planning/plan.md` within the next 4 focused hours, using the existing Next.js + Bun stack with Tailwind, shadcn/ui, Zustand, Zod, and idb-keyval for IndexedDB persistence. This roadmap aligns tasks with timeboxes, clarifies where code will live, and keeps the build modular. Always use shadcn components whenever possible.

**· Global Layout & Navigation Shell**

- [DONE] Replace `app/layout.tsx` to load font, global providers (Zustand context if needed), and wrap pages in `<ShellLayout>`.
- [DONE] Build `components/layout/header.tsx` and `components/layout/mobile-drawer.tsx` for desktop/header vs. collapsed hamburger logic.
- [DONE] Add `components/layout/footer.tsx` with branding copy.
- [DONE] Compose into `features/layout/shell-layout.tsx` to centralize header/footer usage.

**· Core Data Models & Store**

- [DONE] Define `lib/types/recipe.ts` (Recipe, Ingredient, Step types, enums for tags).
- [DONE] Implement Zustand store `lib/stores/recipes-store.ts` with CRUD, like/dislike counters, selectors.
- [DONE] Create persistence helper `lib/storage/recipes.ts` wrapping idb-keyval (init, load, merge, subscribe).
- [DONE] Wire store hydration effect via custom hook in `lib/hooks/use-recipes.ts`.

**· Browse Recipes Page MVP**

- [DONE] Route: `app/(public)/browse/page.tsx` (make `/` redirect to `/browse`).
- [DONE] Local components inside `app/(public)/browse/_components/`:
  - [DONE] `recipe-filters.tsx` (search + tag toggles using shadcn/ui `Input`, `Badge`).
  - [DONE] `recipe-list.tsx` rendering cards from store.
  - [DONE] `recipe-card.tsx` showing image, ingredients, steps (max 7), like/dislike buttons, comments placeholder.
- [DONE] Shared UI primitives placed in `components/ui/` initialized via `shadcn/ui` generator (Button, Input, Badge, Card, Sheet for mobile menu, Tabs for auth, etc.).
- [DONE] Tailwind utility adjustments in `app/globals.css` for layout spacing.

**· Create Recipe Page & Form Validation**

- [DONE] Route: `app/(public)/create/page.tsx`.
- [DONE] Form module folder `app/(public)/create/_components/`:
  - [DONE] `recipe-form.tsx` using `react-hook-form` + Zod schema from `lib/validation/recipe-schema.ts` with `@hookform/resolvers/zod`.
  - [DONE] `live-preview.tsx` reusing `recipe-card` component with controlled values.
- [DONE] Handle image upload with local preview (store base64 / blob URL) and optional fallback image.
- [DONE] Invoke store actions to persist new recipes and sync to IndexedDB.

**· Auth Page Shell (Optional Stretch to Datastore)**

- [DONE] Route: `app/(auth)/login/page.tsx` with two-column layout using shadcn/ui `Tabs` or `Card` components.
- [DONE] Basic `react-hook-form` handlers for login/signup (no backend; stub validation). Focus on UI parity with brief.

**· Polish, QA, Documentation**

- Responsive tweaks (header collapse breakpoints, card grid) using Tailwind in relevant components.
- Implement likes/dislikes persistence, ensure search + tags state persists via URL params or local store.
- Smoke test flows: create recipe, browse, filter.
- Update `README.md` with setup (`bun dev`), architecture summary, follow-up improvements.
- Commit with descriptive messages and ensure linting (`bun lint` if configured) passes.

## Modular Code Structure

- `app/`
  - `layout.tsx`, `page.tsx` (redirect logic).
  - `(public)/browse/page.tsx` and `(public)/create/page.tsx` for main experiences.
  - `(auth)/login/page.tsx` for auth UI shell.
  - Route-specific `_components/` folders colocated with pages for page-scoped UI.
- `components/`
  - `layout/` (header, footer, nav, shell layout pieces).
  - `ui/` generated by shadcn (button, input, card, badge, sheet, textarea, toggle-group, select, form components).
  - `recipes/` shared primitives like `ingredients-list.tsx`, `steps-list.tsx`, `empty-state.tsx`.
- `features/`
  - `recipes/` orchestrating hooks and presenters (`recipes-provider.tsx`, container components).
- `lib/`
  - `types/recipe.ts` (domain models, string literal types for tags).
  - `stores/recipes-store.ts` (Zustand slice with persistence hydration from IndexedDB).
  - `storage/recipes.ts` (idb-keyval helpers: `loadRecipes`, `saveRecipes`, `subscribeToStore`).
  - `validation/recipe-schema.ts` (Zod schema for recipe creation + helpers for partial updates).
  - `utils.ts` (existing file; extend with general helpers like `slugify`, `generateId`).
- `public/`
  - Placeholder assets (default recipe image, logos). Add `public/images/` for sample assets referenced by cards.
- `docs/`
  - `planning/roadmap.md` (this doc), retain `plan.md` and `challenge.md` for traceability.

## Key Implementation Notes

- **State Management:** Use a single Zustand store to drive both browse and create pages. Persist to IndexedDB on changes; hydrate on load before rendering recipe lists.
- **Form Validation:** Zod schemas enforce title/ingredient/step constraints. Use `useFieldArray` for dynamic ingredients/steps and limit to seven steps.
- **UI Components:** Favor shadcn primitives for consistent styling; wrap them in thin adapters if repeated (e.g., `FormField` wrapper for RHF).
- **Responsive Layout:** Header switches to hamburger at `lg:` breakpoint using `Sheet` component for nav links. Browse page uses CSS grid for cards.
- **Accessibility:** Ensure semantic headings, `aria` labels on buttons (like/dislike), keyboard-friendly navigation in filters.

## Testing & QA Checklist

- Quick unit test for store logic in `features/recipes/__tests__/recipes-store.test.ts` (if time permits, using Bun test runner).
- Manual QA matrix: create recipe, reload to verify persistence, filter by tag, search by keyword, toggle likes/dislikes.
- Verify layout on mobile/desktop breakpoints, including header collapse and form preview stacking.

## Stretch Improvements (Document if Time Runs Out)

- Comment threads for recipes stored in Zustand (persisted to IndexedDB).
- Image upload compression & drag-and-drop support.
- Auth form integration with Supabase or NextAuth (future).
- Pagination or lazy loading for large recipe lists.

Following this roadmap keeps the build focused, modular, and aligned with the 4-hour window.
